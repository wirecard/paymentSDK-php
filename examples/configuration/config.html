<!DOCTYPE html><html lang="en"><head><title>examples/configuration/config</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="examples/configuration/config"><meta name="groc-project-path" content="examples/configuration/config.php"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">examples/configuration/config.php</div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-preprocessor">&lt;?php</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h1 id="configuration">Configuration</h1></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The payment SDK needs some basic configuration regarding connectivity and merchant account IDs.</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="required-objects">Required objects</h2></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>To include the necessary files, we use the composer for PSR-4 autoloading.</p></div></div><div class="code"><div class="wrapper"><span class="hljs-keyword">require</span> <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/../../vendor/autoload.php'</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Config</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">CreditCardConfig</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Config</span>\<span class="hljs-title">PaymentMethodConfig</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Entity</span>\<span class="hljs-title">Amount</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Transaction</span>\<span class="hljs-title">BancontactTransaction</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Transaction</span>\<span class="hljs-title">PayPalTransaction</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Transaction</span>\<span class="hljs-title">PaysafecardTransaction</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Transaction</span>\<span class="hljs-title">MasterpassTransaction</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Transaction</span>\<span class="hljs-title">UpopTransaction</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Wirecard</span>\<span class="hljs-title">PaymentSdk</span>\<span class="hljs-title">Transaction</span>\<span class="hljs-title">PayByBankAppTransaction</span>;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="connection">Connection</h2></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Get the gateway from environment variables, we use this switching in our CI</p></div></div><div class="code"><div class="wrapper"><span class="hljs-variable">$gateway</span> = getenv(<span class="hljs-string">'GATEWAY'</span>);

<span class="hljs-variable">$gatewayConfig</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable">$key</span>)</span> <span class="hljs-title">use</span> <span class="hljs-params">(<span class="hljs-variable">$gateway</span>)</span> </span>{</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>if no gateway was defined in the environment, use the api-test.wirecard.com</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$gateway</span>) {
        <span class="hljs-variable">$gateway</span> = <span class="hljs-string">'API-TEST'</span>;
    }
    <span class="hljs-variable">$dataArray</span> = [
        <span class="hljs-string">'NOVA'</span> =&gt; [
            <span class="hljs-string">'base_url_wppv2'</span> =&gt; <span class="hljs-string">'https://payments-test.wirecard.com'</span>,
            <span class="hljs-string">'base_url'</span> =&gt; <span class="hljs-string">'https://payments-test.wirecard.com'</span>,
            <span class="hljs-string">'http_user'</span> =&gt; <span class="hljs-string">'ShopUser'</span>,
            <span class="hljs-string">'http_pass'</span> =&gt; <span class="hljs-string">'pNUPurGGgL'</span>,
            <span class="hljs-string">'threed_maid'</span> =&gt; <span class="hljs-string">'9bbd794c-c791-4bc8-9257-35f3f72d2b55'</span>,
            <span class="hljs-string">'threed_secret'</span> =&gt; <span class="hljs-string">'c6e2715e-4d2b-4ba9-b620-8d7b75eed4c1'</span>,
            <span class="hljs-string">'non_threed_maid'</span> =&gt; <span class="hljs-string">'fd83dbfa-8790-4492-8391-3f3938908b28'</span>,
            <span class="hljs-string">'non_threed_secret'</span> =&gt; <span class="hljs-string">'38424ae8-2dc5-45be-af4c-6e0fee0fea3e'</span>
        ],
        <span class="hljs-string">'API-WDCEE-TEST'</span> =&gt; [
            <span class="hljs-string">'base_url_wppv2'</span> =&gt; <span class="hljs-string">'https://wpp-wdcee-test.wirecard.com'</span>,
            <span class="hljs-string">'base_url'</span> =&gt; <span class="hljs-string">'https://api-wdcee-test.wirecard.com'</span>,
            <span class="hljs-string">'http_user'</span> =&gt; <span class="hljs-string">'pink-test'</span>,
            <span class="hljs-string">'http_pass'</span> =&gt; <span class="hljs-string">'8f5y2h0s'</span>,
            <span class="hljs-string">'threed_maid'</span> =&gt; <span class="hljs-string">'49ee1355-cdd3-4205-920f-85391bb3865d'</span>,
            <span class="hljs-string">'threed_secret'</span> =&gt; <span class="hljs-string">'518c3be1-4aa2-4294-a081-eb7edf20f9d7'</span>,
            <span class="hljs-string">'non_threed_maid'</span> =&gt; <span class="hljs-string">'589651ab-bffe-4f45-9a41-c5466aa8cbc8'</span>,
            <span class="hljs-string">'non_threed_secret'</span>=&gt; <span class="hljs-string">'cf8be86b-a671-4da4-b870-80af5c3eedb1'</span>
        ],
        <span class="hljs-string">'API-TEST'</span> =&gt; [
            <span class="hljs-string">'base_url_wppv2'</span> =&gt; <span class="hljs-string">'https://wpp-test.wirecard.com'</span>,
            <span class="hljs-string">'base_url'</span> =&gt; <span class="hljs-string">'https://api-test.wirecard.com'</span>,
            <span class="hljs-string">'http_user'</span> =&gt; <span class="hljs-string">'70000-APITEST-AP'</span>,
            <span class="hljs-string">'http_pass'</span> =&gt; <span class="hljs-string">'qD2wzQ_hrc!8'</span>,
            <span class="hljs-string">'threed_maid'</span> =&gt; <span class="hljs-string">'508b8896-b37d-4614-845c-26bf8bf2c948'</span>,
            <span class="hljs-string">'threed_secret'</span> =&gt; <span class="hljs-string">'dbc5a498-9a66-43b9-bf1d-a618dd399684'</span>,
            <span class="hljs-string">'non_threed_maid'</span> =&gt; <span class="hljs-string">'53f2895a-e4de-4e82-a813-0d87a10e55e6'</span>,
            <span class="hljs-string">'non_threed_secret'</span>=&gt; <span class="hljs-string">'dbc5a498-9a66-43b9-bf1d-a618dd399684'</span>
        ],
        <span class="hljs-string">'SECURE-TEST-SG'</span> =&gt; [
            <span class="hljs-string">'base_url_wppv2'</span> =&gt; <span class="hljs-string">'https://secure-test.wirecard.com.sg'</span>,
            <span class="hljs-string">'base_url'</span> =&gt; <span class="hljs-string">'https://secure-test.wirecard.com.sg'</span>,
            <span class="hljs-string">'http_user'</span> =&gt; <span class="hljs-string">'uatwd_ecom'</span>,
            <span class="hljs-string">'http_pass'</span> =&gt; <span class="hljs-string">'Tomcat123'</span>,
            <span class="hljs-string">'threed_maid'</span> =&gt; <span class="hljs-string">'d7855010-64c1-4e66-9ab3-d98b309a3d8c'</span>,
            <span class="hljs-string">'threed_secret'</span> =&gt; <span class="hljs-string">'543d957b-dcc9-46cd-8258-0f49ed97fa8e'</span>,
            <span class="hljs-string">'non_threed_maid'</span> =&gt; <span class="hljs-string">'d7855010-64c1-4e66-9ab3-d98b309a3d8c'</span>,
            <span class="hljs-string">'non_threed_secret'</span> =&gt; <span class="hljs-string">'543d957b-dcc9-46cd-8258-0f49ed97fa8e'</span>
        ],
        <span class="hljs-string">'TEST-SG'</span> =&gt; [
            <span class="hljs-string">'base_url_wppv2'</span> =&gt; <span class="hljs-string">'https://test.wirecard.com.sg'</span>,
            <span class="hljs-string">'base_url'</span> =&gt; <span class="hljs-string">'https://test.wirecard.com.sg'</span>,
            <span class="hljs-string">'http_user'</span> =&gt; <span class="hljs-string">'wirecarduser3d'</span>,
            <span class="hljs-string">'http_pass'</span> =&gt; <span class="hljs-string">'Tomcat123'</span>,
            <span class="hljs-string">'threed_maid'</span> =&gt; <span class="hljs-string">'961c567b-d9da-41f6-9801-ba21cb228a00'</span>,
            <span class="hljs-string">'threed_secret'</span> =&gt; <span class="hljs-string">'03365d5f-1a12-4f16-9351-7ee59ddc9d3f'</span>,
            <span class="hljs-string">'non_threed_maid'</span> =&gt; <span class="hljs-string">'961c567b-d9da-41f6-9801-ba21cb228a00'</span>,
            <span class="hljs-string">'non_threed_secret'</span> =&gt; <span class="hljs-string">'03365d5f-1a12-4f16-9351-7ee59ddc9d3f'</span>
        ]
    ];

    <span class="hljs-keyword">return</span> <span class="hljs-variable">$dataArray</span>[<span class="hljs-variable">$gateway</span>][<span class="hljs-variable">$key</span>];
};</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The basic configuration requires the base URL for Wirecard and the username and password for the HTTP requests.</p></div></div><div class="code"><div class="wrapper"><span class="hljs-variable">$baseUrl</span> = <span class="hljs-variable">$gatewayConfig</span>(<span class="hljs-string">'base_url'</span>);
<span class="hljs-variable">$baseUrlWppv2</span> = <span class="hljs-variable">$gatewayConfig</span>(<span class="hljs-string">'base_url_wppv2'</span>);
<span class="hljs-variable">$httpUser</span> = <span class="hljs-variable">$gatewayConfig</span>(<span class="hljs-string">'http_user'</span>);
<span class="hljs-variable">$httpPass</span> = <span class="hljs-variable">$gatewayConfig</span>(<span class="hljs-string">'http_pass'</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>The configuration is stored in an object containing the connection settings set above.
A default currency can also be provided.</p></div></div><div class="code"><div class="wrapper"><span class="hljs-variable">$config</span> = <span class="hljs-keyword">new</span> Config\Config(<span class="hljs-variable">$baseUrl</span>, <span class="hljs-variable">$httpUser</span>, <span class="hljs-variable">$httpPass</span>, <span class="hljs-string">'EUR'</span>, <span class="hljs-variable">$baseUrlWppv2</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="payment-methods">Payment methods</h2></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Each payment method can be configured with an individual merchant account ID and the corresponding key.
The configuration object for Credit Card is a little different than other payment methods and can be
instantiated without any parameters. If you wish to omit non-3-D transactions you can just leave out the
maid and secret in the default CreditCardConfig. However if you want to use non-3-D transactions you have two
ways of setting the credentials. First via setting the parameters maid and secret -</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="credit-card-non-3-d">Credit Card Non-3-D</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-variable">$creditcardConfig</span> = <span class="hljs-keyword">new</span> CreditCardConfig();</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><ul>
<li>second via using this specific setter.</li>
</ul></div></div><div class="code"><div class="wrapper"><span class="hljs-variable">$creditcardConfig</span>-&gt;setNonThreeDCredentials(
    <span class="hljs-variable">$gatewayConfig</span>(<span class="hljs-string">'non_threed_maid'</span>),
    <span class="hljs-variable">$gatewayConfig</span>(<span class="hljs-string">'non_threed_secret'</span>)
);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Define the limit to allow the maximum amount for a non-3-D transaction, all amounts above this value will be done as
3d secure transaction</p></div></div><div class="code"><div class="wrapper"><span class="hljs-variable">$creditcardConfig</span>-&gt;addNonThreeDMaxLimit(<span class="hljs-keyword">new</span> Amount(<span class="hljs-number">100.0</span>, <span class="hljs-string">'EUR'</span>));</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Define the limit to allow the minimum amount for a 3-D transaction, all amounts below or equal the limit will be done
as non-3-D transaction</p></div></div><div class="code"><div class="wrapper"><span class="hljs-variable">$creditcardConfig</span>-&gt;addThreeDMinLimit(<span class="hljs-keyword">new</span> Amount(<span class="hljs-number">50.0</span>, <span class="hljs-string">'EUR'</span>));</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Amounts larger than threeDMinLimit and smaller or equal nonThreeDLimit will first be tried as 3-D-Secure
transaction and will fallback on error as non-3D transaction</p></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="credit-card-3-d">Credit Card 3-D</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-variable">$creditcardConfig</span>-&gt;setThreeDCredentials(
    <span class="hljs-variable">$gatewayConfig</span>(<span class="hljs-string">'threed_maid'</span>),
    <span class="hljs-variable">$gatewayConfig</span>(<span class="hljs-string">'threed_secret'</span>)
);

<span class="hljs-variable">$config</span>-&gt;add(<span class="hljs-variable">$creditcardConfig</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="paypal">PayPal</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-variable">$paypalMAID</span> = <span class="hljs-string">'2a0e9351-24ed-4110-9a1b-fd0fee6bec26'</span>;
<span class="hljs-variable">$paypalKey</span> = <span class="hljs-string">'dbc5a498-9a66-43b9-bf1d-a618dd399684'</span>;
<span class="hljs-variable">$paypalConfig</span> = <span class="hljs-keyword">new</span> PaymentMethodConfig(PayPalTransaction::NAME, <span class="hljs-variable">$paypalMAID</span>, <span class="hljs-variable">$paypalKey</span>);
<span class="hljs-variable">$config</span>-&gt;add(<span class="hljs-variable">$paypalConfig</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="paysafecard">paysafecard</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-variable">$paysafecardMAID</span> = <span class="hljs-string">'28d4938b-d0d6-4c4a-b591-fb63175de53e'</span>;
<span class="hljs-variable">$paysafecardKey</span> = <span class="hljs-string">'dbc5a498-9a66-43b9-bf1d-a618dd399684'</span>;
<span class="hljs-variable">$paysafecardConfig</span> = <span class="hljs-keyword">new</span> PaymentMethodConfig(PaysafecardTransaction::NAME, <span class="hljs-variable">$paysafecardMAID</span>, <span class="hljs-variable">$paysafecardKey</span>);
<span class="hljs-variable">$config</span>-&gt;add(<span class="hljs-variable">$paysafecardConfig</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="bancontact">Bancontact</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-variable">$bancontactMAID</span> = <span class="hljs-string">'c41a62ad-aecb-45b3-b367-e0d2cf946ce3'</span>;
<span class="hljs-variable">$bancontactKey</span> = <span class="hljs-string">'dbc5a498-9a66-43b9-bf1d-a618dd399684'</span>;
<span class="hljs-variable">$bancontactConfig</span> = <span class="hljs-keyword">new</span> PaymentMethodConfig(BancontactTransaction::NAME, <span class="hljs-variable">$bancontactMAID</span>, <span class="hljs-variable">$bancontactKey</span>);
<span class="hljs-variable">$config</span>-&gt;add(<span class="hljs-variable">$bancontactConfig</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="masterpass">Masterpass</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-variable">$masterpassMAID</span> = <span class="hljs-string">'8bc8ed6d-81a8-43be-bd7b-75b008f89fa6'</span>;
<span class="hljs-variable">$masterpassSecret</span> = <span class="hljs-string">'2d96596b-9d10-4c98-ac47-4d56e22fd878'</span>;
<span class="hljs-variable">$masterpassConfig</span> = <span class="hljs-keyword">new</span> PaymentMethodConfig(MasterpassTransaction::NAME, <span class="hljs-variable">$masterpassMAID</span>, <span class="hljs-variable">$masterpassSecret</span>);
<span class="hljs-variable">$config</span>-&gt;add(<span class="hljs-variable">$masterpassConfig</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="unionpay-online-payments-upop">UnionPay Online Payments (UPOP)</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-variable">$upopMAID</span> = <span class="hljs-string">'a908b093-382c-4de9-b26a-624802850216'</span>;
<span class="hljs-variable">$upopSecret</span> = <span class="hljs-string">'b2f8ffd2-7866-44ed-a858-f27f13f0bd77'</span>;
<span class="hljs-variable">$upopConfig</span> = <span class="hljs-keyword">new</span> PaymentMethodConfig(UpopTransaction::NAME, <span class="hljs-variable">$upopMAID</span>, <span class="hljs-variable">$upopSecret</span>);
<span class="hljs-variable">$config</span>-&gt;add(<span class="hljs-variable">$upopConfig</span>);</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h3 id="pay-by-bank-app">Pay by Bank app</h3></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-variable">$pbbaMAID</span> = <span class="hljs-string">'70055b24-38f1-4500-a3a8-afac4b1e3249'</span>;
<span class="hljs-variable">$pbbaSecret</span> = <span class="hljs-string">'	4a4396df-f78c-44b9-b8a0-b72b108ac465'</span>;
<span class="hljs-variable">$pbbaConfig</span> = <span class="hljs-keyword">new</span> PaymentMethodConfig(PayByBankAppTransaction::NAME, <span class="hljs-variable">$pbbaMAID</span>, <span class="hljs-variable">$pbbaSecret</span>);
<span class="hljs-variable">$config</span>-&gt;add(<span class="hljs-variable">$pbbaConfig</span>);</div></div></div></div></body></html>